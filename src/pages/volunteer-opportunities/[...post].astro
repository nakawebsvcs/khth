---
import { getCollection, render } from "astro:content";
import { Image } from "astro:assets";
import BaseLayout from "src/layouts/BaseLayout.astro";
import { formatDate, getOptimizedImage } from "@js/utils";
import Landing from "@components/Landing.astro";
import "@styles/blog.less";

import landingImage from "@assets/images/landing.jpg"
const optimizedImage = await getOptimizedImage(landingImage)

export async function getStaticPaths() {
  const volunteerOpportunities = await getCollection("volunteerOpportunities");
  return volunteerOpportunities.map((entry) => ({
    params: { post: entry.id },
    props: { entry },
  }));
}

const { entry } = Astro.props;
const { title, date, description, image } = entry.data;
const { Content } = await render(entry);
---

<BaseLayout
  title={title}
  description={description}
  preloadedImage={optimizedImage}
>
  <Landing 
    title="Volunteer Opportunities"
    image={optimizedImage}
  />

  <div class="blog-container main-content-wrapper">
    <div class="main-content">
      <article class="blog-article">
        <picture class="blog-mainImage">
          <Image
            src={image}
            alt={title}
            width="795"
            height="400"
            decoding="async"
          />
        </picture>

        <div class="article-group">
          <h1 class="blog-h1">{title}</h1>
          <div class="blog-authorGroup">
            <span class="blog-date">{formatDate(date)}</span>
          </div>
        </div>
        <section id="blog-content">
          <Content />
        </section>
      </article>
    </div>
  </div>
</BaseLayout>